<Window x:Class="ShoukatSons.UI.Views.DashboardView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Shoukat Sons POS Dashboard"
        Height="520" Width="980"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        Background="#F5F5F5"
        ShowInTaskbar="True">
    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Background="White" CornerRadius="8" Padding="14" Margin="0,0,0,12">
            <TextBlock Text="Shoukat Sons â€” Point of Sale"
                       FontSize="24" FontWeight="Bold" Foreground="#2E3A59"/>
        </Border>

        <!-- Content Row: Left = Buttons, Right = KPIs + Alerts -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Main Buttons (Left) -->
            <Border Grid.Column="0" Background="White" CornerRadius="8" Padding="10" Margin="0,0,12,0">
                <UniformGrid Rows="2" Columns="3" Margin="4"
                             HorizontalAlignment="Center" VerticalAlignment="Center">

                    <Button Content="_Products"
                            FontSize="16" Margin="10" Padding="10"
                            ToolTip="Manage products"
                            Command="{Binding ManageProductsCommand}"/>

                    <Button Content="_POS"
                            FontSize="16" Margin="10" Padding="10"
                            ToolTip="Open point of sale"
                            Command="{Binding OpenPOSCommand}"/>

                    <Button Content="_Label Generator"
                            FontSize="16" Margin="10" Padding="10"
                            ToolTip="Generate and print product labels"
                            Command="{Binding LabelGeneratorCommand}"/>

                    <Button Content="_Reports"
                            FontSize="16" Margin="10" Padding="10"
                            ToolTip="View reports"
                            Command="{Binding ReportsCommand}"/>

                    <Button Content="_Settings"
                            FontSize="16" Margin="10" Padding="10"
                            ToolTip="Application settings"
                            Command="{Binding SettingsCommand}"/>

                    <Button Content="E_xit"
                            FontSize="16" Margin="10" Padding="10"
                            ToolTip="Close the application"
                            Command="{Binding ExitCommand}"/>
                </UniformGrid>
            </Border>

            <!-- KPIs + Alerts (Right) -->
            <Border Grid.Column="1" Background="White" CornerRadius="8" Padding="12">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- KPI Cards -->
                    <Grid Grid.Row="0" Margin="0,0,0,12">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <Border Background="#F0F4FF" CornerRadius="6" Padding="10" Margin="0,0,8,0">
                            <StackPanel>
                                <TextBlock Text="Today's Total" Foreground="#2E3A59" FontWeight="SemiBold"/>
                                <TextBlock Text="{Binding TodayTotal, StringFormat={}{0:N0}}"
                                           Foreground="#0D6EFD" FontSize="20" FontWeight="Bold"/>
                            </StackPanel>
                        </Border>

                        <Border Grid.Column="1" Background="#F0FFF4" CornerRadius="6" Padding="10" Margin="8,0,0,0">
                            <StackPanel>
                                <TextBlock Text="Products" Foreground="#2E3A59" FontWeight="SemiBold"/>
                                <TextBlock Text="{Binding ProductsCount}"
                                           Foreground="#198754" FontSize="20" FontWeight="Bold"/>
                            </StackPanel>
                        </Border>
                    </Grid>

                    <!-- Low Stock Alerts -->
                    <StackPanel Grid.Row="1">
                        <TextBlock Text="Low stock" FontSize="16" FontWeight="Bold" Foreground="#2E3A59" Margin="0,0,0,8"/>
                        <Border BorderBrush="#E5E7EB" BorderThickness="1" CornerRadius="6">
                            <ScrollViewer VerticalScrollBarVisibility="Auto" Height="320">
                                <ItemsControl ItemsSource="{Binding Alerts}">
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <Border BorderBrush="#F0F0F0" BorderThickness="0,0,0,1" Padding="8">
                                                <DockPanel LastChildFill="False">
                                                    <StackPanel Orientation="Vertical" DockPanel.Dock="Left" Width="180">
                                                        <TextBlock Text="{Binding Message}" FontWeight="SemiBold" Foreground="#2E3A59"/>
                                                        <TextBlock Text="{Binding AlertedAt, StringFormat='{}{0:dd MMM, HH:mm}'}" Foreground="#6B7280" FontSize="12"/>
                                                    </StackPanel>

                                                    <StackPanel Orientation="Horizontal" DockPanel.Dock="Left" Margin="8,0,0,0">
                                                        <TextBlock Text="Qty:" Foreground="#6B7280" Margin="0,0,4,0"/>
                                                        <TextBlock Text="{Binding Quantity}" Foreground="#DC3545" FontWeight="Bold"/>
                                                    </StackPanel>

                                                    <Button Content="Dismiss"
                                                            Margin="12,0,0,0"
                                                            Padding="6,2"
                                                            Command="{Binding DataContext.DismissAlertCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                                            CommandParameter="{Binding Id}"/>
                                                </DockPanel>
                                            </Border>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                    <ItemsControl.Style>
                                        <Style TargetType="ItemsControl">
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding Alerts.Count}" Value="0">
                                                    <Setter Property="Template">
                                                        <Setter.Value>
                                                            <ControlTemplate>
                                                                <Border Padding="16">
                                                                    <TextBlock Text="No low-stock alerts." Foreground="#6B7280"/>
                                                                </Border>
                                                            </ControlTemplate>
                                                        </Setter.Value>
                                                    </Setter>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </ItemsControl.Style>
                                </ItemsControl>
                            </ScrollViewer>
                        </Border>
                    </StackPanel>
                </Grid>
            </Border>
        </Grid>
    </Grid>
</Window>